#!/usr/bin/python3

from sys import argv
from os import system
from subprocess import check_call

print (argv)

def call(*args):
    try:
        check_call(args)
    except Exception as e:
        print (str(e))

if argv[1] == 'serve':
    commit = False
    print ("No commit")
else:
    commit = argv[1]
system('./SimplePreprocessor/spp -s "_posts"')
if commit:
    system('jekyll build')
    system('git add .')
    system('git add -u')
    call('git', 'commit', '-m', commit)
    system('git push origin master')
    system('git add .')
    system('git add -u')
    system('git status')
    call('git', 'commit', '-m', commit)
else:
    system('jekyll serve')
system('./SimplePreprocessor/spp -s "_posts" -c')
