#!/usr/bin/python3

from sys import argv
from os import system
from subprocess import check_call

print (argv)

if argv[1] == 'serve':
    commit = False
    print ("No commit")
else:
    commit = argv[1]
system('./SimplePreprocessor/spp -s "_posts"')
if commit:
    system('jekyll build')
    system('git add .')
    system('git add -u')
    check_call(['git', 'commit', '-m', commit])
    print ("A")
    system('git push origin master')
    system('git add .')
    system('git add -u')
    check_call(['git', 'commit', '-m', commit.replace("\"", "")
            + ' (Saving actual state of my computer so git diff works;'
            + ' cannot push because that breaks the website.)'])
else:
    system('jekyll serve')
system('./SimplePreprocessor/spp -s "_posts" -c')
